<!DOCTYPE html>
<html th:replace="~{layout/layout :: layout(~{::title}, ~{::section})}" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>MalwareFile</title>
</head>
<body>

    <section>
        <table class="table table-bordered">
            <tr>
                <th>ID</th>
                <td th:text="${malwareFileDetailDto.id}"/>
                <th>시그니처</th>
                <td th:text="${malwareFileDetailDto.signature}"/>
            </tr>

            <tr>
                <th>파일이름</th>
                <td><a th:text="${malwareFileDetailDto.filename}" th:href="@{/malwarefile/{id}/download(id=${malwareFileDetailDto.id})}"></a></td>
            </tr>
        </table>

        <button class="btn btn-outline-success" th:onclick="|location.href='@{|/analyze/model1/${malwareFileDetailDto.id}|}'|">api 리포트</button>

        <div class="bg-light">
            <div class="py-5 text-center">
                <h2>관련 악성코드 리스트</h2>
            </div>
            <table class="table">
                <thead>
                <tr>
                    <th>id</th>
                    <th>title</th>
                    <th>nickname</th>
                    <th>riskness</th>
                    <th>detectedTime</th>
                    <th>resolvedTime</th>
                </tr>
                <thead>
                <tbody>
                <tr th:each="malware : ${malwareFileDetailDto.getMalwarePage().getContent()}">
                    <td th:text="${malware.id}"></td>
                    <td><a th:text="${malware.title}" th:href="@{/malware/{id}(id=${malware.id})}" /></td>
                    <td th:text="${malware.nickname}"></td>
                    <td th:text="${malware.riskness}"></td>
                    <td th:text="${#temporals.format(malware.detectedTime, 'yyyy-MM-dd HH:mm:SS')}"></td>
                    <td th:text="${#temporals.format(malware.resolvedTime, 'yyyy-MM-dd HH:mm:SS')}"></td>
                </tr>
                </tbody>
            </table>

            <div th:if="${malwareFileDetailDto.malwarePage.customPageable.getTotalPages() > 1}">   <!--todo 링크 동적으로 거는 자바스크립트 만들기..-->
                <ul class="pagination justify-content-center">

                    <li class="page-item">
                        <a id="prev" class="page-link" th:classappend="${!malwareFileDetailDto.malwarePage.customPageable.hasPrevious} ? 'disabled'">
                            <span>이전</span>
                        </a>
                    </li>

                    <li th:each="page: ${#numbers.sequence(1, malwareFileDetailDto.malwarePage.customPageable.totalPages)}"
                        th:if="${page >= malwareFileDetailDto.malwarePage.customPageable.page-5 and page <= malwareFileDetailDto.malwarePage.customPageable.page+5}"
                        th:classappend="${page == malwareFileDetailDto.malwarePage.customPageable.page} ? 'active'"
                        class="page-item">
                        <a th:id="${'page'+page}" th:text="${page}" class="page-link" th:classappend="${page == malwareFileDetailDto.malwarePage.customPageable.page} ? 'disabled'"></a>
                    </li>

                    <li class="page-item">
                        <a id="next" class="page-link" th:classappend="${!malwareFileDetailDto.malwarePage.customPageable.hasNext} ? 'disabled'">
                            <span>다음</span>
                        </a>
                    </li>

                </ul>
            </div>
        </div>

    </section>

</body>
</html>