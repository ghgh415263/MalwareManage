import { getNextCommentList } from './GetCommentList.js';
import { postComment } from './PostComment.js';

window.onload  = () => {
    const assignmentId = window.location.pathname.split("/").at(-1);
    getNextCommentList(assignmentId, null);
}


document.getElementsByClassName('btn').item(1)
    .addEventListener('click', (event) => {
        const lastCommentId = $(".list-group li").last().data("id");
        const assignmentId = window.location.pathname.split("/").at(-1);
        getNextCommentList(assignmentId, lastCommentId);
    })

document.getElementsByClassName('btn').item(0)
    .addEventListener('click', (event) => {
        postComment().then((response) => {
            if (response.ok) {
                $(".list-group li").each(function(){
                    $(this).remove();
                });
                const assignmentId = window.location.pathname.split("/").at(-1);
                getNextCommentList(assignmentId, null)
            }
        })
    })