import { getCommentList } from './GetCommentList.js';
import { renderComments } from "./makeCommentTag.js"
import { renderPaginationBar } from "../makePaginationBar.js";

window.onload = async () => {
    const customPage = await getCommentList(1)

    const $listWapper = document.querySelector('.list-group');
    const $paginationBarWapper = document.querySelector('.paging');
    renderComments(customPage.content, $listWapper)
    renderPaginationBar(customPage.customPageable, $paginationBarWapper);
}

const $pageBar = document.querySelector('.paging');
$pageBar.addEventListener('click', async (e) => {

    const page = e.target.dataset.page;
    if (!page) {
        return;
    }

    const pageable = await getCommentList(page);
    const $listWapper = document.querySelector('.list-group');
    const $pageBarWapper = document.querySelector('.paging');
    renderComments(pageable.content, $listWapper)
    renderPaginationBar(pageable.customPageable, $pageBarWapper);
});

const $comments = document.querySelector('.list-group');