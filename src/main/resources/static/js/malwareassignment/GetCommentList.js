export const getNextCommentList = (assignmentId, lastCommentId) => {

    let url = '/assignments/' + assignmentId + '/comments';
    if (lastCommentId !== null) {
        url = url + '?lastCommentId=' + lastCommentId;
    }
    console.log

    let options = {
        method: 'GET',
        mode: 'cors',
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json;charset=UTF-8'
        },
    }

    fetch(url, options)
        .then((response) => {
            if (response.ok) {
                return response.json()
            }
        })
        .then(result => {
            for (const comment of result.content){
                const $li = makeCommentTag(comment)
                console.log($li);
                $('.list-group').append($li);
            }
        })
}

const makeCommentTag = (comment) => {
    const $li = document.createElement('li');
    $li.setAttribute('class','list-group-item');
    $li.setAttribute('data-id',comment.id);

    const $strong = document.createElement('strong');
    $strong.innerText = comment.writerUsername;

    const $div = document.createElement('div');
    $div.innerText = comment.content

    const $button = document.createElement('button');
    $button.innerText = "삭제";

    $li.append($strong, $div, $button);

    return $li;
}