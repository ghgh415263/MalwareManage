const postComment = () => {
    const assignmentId = window.location.pathname.split("/").at(-1);

    let url = '/assignments/' + assignmentId + '/comments/create';
    const commentContent = document.getElementById("comment-content").value;

    const header = document.querySelector('meta[name="_csrf_header"]').content;
    const token = document.querySelector('meta[name="_csrf"]').content;

    let options = {
        method: 'POST',
        mode: 'cors',
        headers: {
            'header': header,
            'X-Requested-With': 'XMLHttpRequest',
            'Accept': 'application/json',
            "Content-Type": "application/json; charset=UTF-8",
            'X-CSRF-Token': token
        },
        body: JSON.stringify({
            content : commentContent
        }),
    }

    fetch(url, options)
        .then((response) => {
            if (response.ok) {
                $(".list-group li").each(function(){
                    $(this).remove();
                });
                getNextCommentList(null)
            }
        })
}

document.getElementsByClassName('btn').item(0)
    .addEventListener('click', (event) => {
        postComment();
    })