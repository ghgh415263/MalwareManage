export const getNextAssignmentList = (lastAssignmentId) => {

    const memberId = window.location.pathname.split("/").at(-1);
    let url = '/members/' + memberId + '/assignments';
    if (lastAssignmentId !== null) {
        url = url + '?lastAssignmentId=' + lastAssignmentId;
    }

    let options = {
        method: 'GET',
        mode: 'cors',
        headers: {
            'Accept': 'application/json',
            'Content-Type': 'application/json;charset=UTF-8'
        },
    }

    fetch(url, options)
        .then((response) => {
            if (response.ok) {
                return response.json()
            }
        })
        .then(result => {
            for (const assignment of result.content){
                const $tr = makeAssignmentTag(assignment)
                $('.assignment-list').append($tr);
            }
        })
}

const makeAssignmentTag = (assignment) => {
    const $tr = document.createElement('tr');

    const $tdId = document.createElement('td');
    $tdId.innerText = assignment.id;

    const $tdTitle = document.createElement('td');
    $tdTitle.innerText = assignment.title;

    const $tdAssignmentStatus = document.createElement('td');
    $tdAssignmentStatus.innerText = assignment.assignmentStatus;

    const $tdEstimatedTime = document.createElement('td');
    $tdEstimatedTime.innerText = assignment.estimatedTime;

    const $tdIsAssignedToMe = document.createElement('td');
    $tdIsAssignedToMe.innerText = assignment.isAssignedToMe;

    $tr.append($tdId, $tdTitle, $tdAssignmentStatus, $tdEstimatedTime, $tdIsAssignedToMe);

    return $tr
}