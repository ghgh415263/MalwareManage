package com.malclean.admin.service.malwareassignment;

import com.malclean.admin.entity.MalwareAssignment;
import com.malclean.admin.repository.malwareassignment.MalwareAssignmentRepository;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import javax.persistence.EntityNotFoundException;

@RequiredArgsConstructor
@Slf4j
@Service
public class MalwareAssignmentEditService {

    private final MalwareAssignmentRepository malwareAssignmentRepository;

    @Transactional
    public void editMalwareAssignment(Long assignmentId, AssignmentEditRequest assignmentEditRequest, String sessionUsername) {
        MalwareAssignment malwareAssignment = malwareAssignmentRepository.findById(assignmentId)
                .orElseThrow(() -> new EntityNotFoundException());

        malwareAssignment.editTitle(assignmentEditRequest.getTitle());
        malwareAssignment.editContent(assignmentEditRequest.getContent());
        malwareAssignment.editAssignmentStatus(assignmentEditRequest.getAssignmentStatus());
        malwareAssignment.editEstimatedTime(assignmentEditRequest.getEstimatedTime());
    }
}
