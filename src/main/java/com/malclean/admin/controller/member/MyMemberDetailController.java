package com.malclean.admin.controller.member;

import com.malclean.admin.entity.Member;
import com.malclean.admin.repository.member.MemberRepository;
import com.malclean.admin.security.CustomMemberDetails;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.security.core.annotation.AuthenticationPrincipal;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;

@RequiredArgsConstructor
@Slf4j
@Controller
public class MyMemberDetailController {

    private final MemberRepository memberRepository;

    public String MemberDetail(@AuthenticationPrincipal CustomMemberDetails sessionMemberDetails, Model model) {

        Member member = memberRepository.findByUsername(sessionMemberDetails.getUsername())
                .orElseThrow();
        model.addAttribute("member", member);
        return "";
    }
}
