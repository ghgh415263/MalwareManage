package com.malclean.admin.controller.assignmentcomment;

import com.malclean.admin.security.CustomMemberDetails;
import com.malclean.admin.service.assignmentcomment.AssignmentCommentSaveService;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.security.core.annotation.AuthenticationPrincipal;
import org.springframework.validation.BindingResult;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.*;

@RequiredArgsConstructor
@Slf4j
@RestController
public class AssignmentCommentSaveController {

    private final AssignmentCommentSaveService assignmentCommentSaveService;

    @GetMapping("/assignments/{assignmentId}/comments/create")
    public String save(@PathVariable Long assignmentId, @RequestBody @Validated CommentSaveRequest commentSaveRequest, @AuthenticationPrincipal CustomMemberDetails sessionMemberDetails){

        assignmentCommentSaveService.saveAssignmentComment(assignmentId, commentSaveRequest, sessionMemberDetails.getUsername());

        return "{ 'isSuccessful': true }";
    }
}
