package com.malclean.admin.domain.malware.malware;

import com.malclean.admin.domain.malware.malware.repository.MalwareRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.stereotype.Service;

@RequiredArgsConstructor
@Service
public class MalwareValidationService {

    private final MalwareRepository malwareRepository;

    private void validateTitle(String title) {
        if (malwareRepository.existsByTitle(title))
            throw new IllegalArgumentException("제목 중복");
    }

    private void validateNickname(String nickname) {
        if (malwareRepository.existsByNickname(nickname))
            throw new IllegalArgumentException("닉네임 중복");
    }

    public void validateForEdit(Malware malware, String newTitle, String newNickname) {
        if (!malware.isSameTitle(newTitle))
            validateTitle(newTitle);

        if (!malware.isSameNickname(newNickname))
            validateNickname(newNickname);
    }

    public void validateForSave(String newTitle, String newNickname) {
        validateTitle(newTitle);
        validateNickname(newNickname);
    }

}
