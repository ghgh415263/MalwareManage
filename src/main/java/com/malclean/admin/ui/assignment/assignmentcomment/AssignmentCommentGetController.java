package com.malclean.admin.ui.assignment.assignmentcomment;

import com.malclean.admin.application.assignment.assignmentcomment.AssginmentCommentEditService;
import com.malclean.admin.domain.assignment.assignmentcomment.AssignmentComment;
import lombok.Getter;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.bind.annotation.SessionAttribute;

@RequiredArgsConstructor
@Slf4j
@RestController
public class AssignmentCommentGetController {

    private final AssginmentCommentEditService editService;

    @GetMapping("/comments/{id}")
    public AssignmentCommentResponse assignmentComment(@PathVariable Long id,
                                                       @SessionAttribute(name = "loginMemberId") Long loginMemberId) {

        AssignmentComment assignmentComment = editService.getDetail(id, loginMemberId);

        return new AssignmentCommentResponse(assignmentComment);
    }

    @Getter
    static class AssignmentCommentResponse{
        private Long id;

        private String content;

        public AssignmentCommentResponse(AssignmentComment assignmentComment) {
            this.id = assignmentComment.getId();
            this.content = assignmentComment.getContent();
        }
    }
}
